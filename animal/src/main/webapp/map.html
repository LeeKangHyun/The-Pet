<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>지도</title>
</head>

<body>

  <div style="margin-top:50px">
    <div id="map_canvas" style="width:500px;height:380px;margin:50px 0 170px 0;"></div>
  </div>

  <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3.3&sensor=ture"></script>

  <script type="text/javascript">
    // 성공시
    function success(position) {
      var latlng = new google.maps.LatLng(position.coords.latitude, position.coords
        .longitude);

      var myOptions = {
        zoom: 17,
        center: latlng,
        mapTypeControl: false,
        navigationControlOptions: {
          style: google.maps.NavigationControlStyle.SMALL
        },
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };

      var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);

    //   var marker = new google.maps.Marker({
    //     position: latlng,
    //     map: map
    //   });

      var request = {
        location: pyrmont,
        radius: '500',
        types: ['store']
      };
      console.log(request);
      var service = new google.maps.places.PlacesService(map);
      service.nearbySearch(request, function(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            var place = results[i];
            // If the request succeeds, draw the place location on
            // the map as a marker, and register an event to handle a
            // click on the marker.
            var marker = new google.maps.Marker({
              map: map,
              position: place.geometry.location
            });
          }
        }
      });
    }

    // 실패시
    function error(msg) {
      var s = document.querySelector('#map_canvas');
      s.innerHTML = typeof msg == 'string' ? msg : "failed";
      s.className = 'fail';
    }

    // 현재위치
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success);
    } else {
      error('not supported');
    }

  </script>
</body>

</html>
