<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>멀티파일....</title>
  <script src="lib/jquery/jquery.min.js"></script>
  <script src="lib/bootstrap/dist/js/bootstrap.min.js"></script>

  <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css">

  <script src="lib/multifile/jquery.MetaData.js"></script>
  <script src="lib/multifile/jquery.MultiFile.js"></script>
  <script src="lib/jquery-form/jquery.form.js"></script>
</head>

<body>
  <input type="file" id="avatar" name="avatar" data-maxfile="4096" multiple />
  <button id="upload" class="btn btn-danger">Upload</button>

  <script>
    $('#avatar').MultiFile({
      max: 10,
      accept: "gif|jpeg|jpg|png|bmp"
    });

    $(document).on("change", prepareLoad);

    function prepareLoad(event) {
      console.log(event);
      console.log($("#avatar"));
    }

    $(document).on("click", "#upload", function(event) {
        console.log(event);
      for (var i = 0; i < event.target.files.length; i++) {
        console.log(event.target.files[i].name);
      }

      var file_data = $("#avatar").prop("files")[0];
      var file_name = file_data.name;
      var form_data = new FormData();
      form_data.append("file", file_data)
      form_data.append("fName", file_name)

      $.ajax({
        url: "file/ajax/upload.do",
        dataType: "json",
        cache: false,
        contentType: false,
        processData: false,
        data: form_data,
        type: 'post'
      })
    })
  </script>

</body>

</html>
