<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>Slid Menu</title>

<link href="../lib/bootstrap/dist/css/bootstrap.css" rel='stylesheet'
  type='text/css' />

<!--  내가만든 css들  -->
<link href="../css/sh_slidmenu_header.less" type="style.less"
  rel="stylesheet/less" />

<!--  폰트아이콘 링크  -->
<link href="../lib/font-awesome/css/font-awesome.min.css"
  rel="stylesheet" />
<link href="../css/icon-font.min.css" rel="stylesheet" />

<!-- 부트스트랩 -->
<script src='../lib/jquery/jquery.js'></script>
<script src="../lib/bootstrap/dist/js/bootstrap.js"></script>
<script src="../lib/less/less.js" type="text/javascript"></script>

<script src="../lib/jquery-session-plugin/jquery.session.js"
  type="text/javascript"></script>
  
<!-- 지호가 만든 BoastDetail Css -->
<link href="../css/jh_detail.css" type="stylesheet" rel="stylesheet" />


<!-- Image Slide get Start Script -->    
    <script>
    $(document).ready(function() {
    $('.carousel').carousel({
        interval: 3000,
        pause: "hover",
        wrap: true,
        keyboard: true
    });
    });
    </script>
    


</head>

<body>
  <header id="menu" style="position:fix; margin-top:-80px;">
    <div id="header_title">
      <a class="headerTitle" href="../pet.html">THE PET</a>
      <div id="user_info"></div>
    </div>
    <!--  메뉴 버튼  -->
    <input type="checkbox" id="menuToggle" />

    <div id="sideMenu">
      <label for="menuToggle" id="menu-icon"><i
        class="fa fa-bars fa-lg"></i></label>
      <!--  메뉴 내용  -->

      <nav id="menu-nav">
        <ul>
          <li><a href="#"><i class="lnr lnr-pencil"></i> 교육</a></li>
          <li><a href="#"><i class="lnr lnr-store"></i> 분양</a></li>
          <li><a href="#"><i class="lnr lnr-heart"></i> 짝짓기</a></li>
          <li><a href="#"><i class="lnr lnr-leaf"></i> 산책코스</a></li>
          <li><a href="boastBoard.html"><i class="lnr lnr-paw"></i>
              자랑해요</a></li>
        </ul>
      </nav>
      <!--  //메뉴 내용  -->
    </div>
  </header>

    
    
<!-- 내용 시작 -->    
<div id="content">
    
    <!-- content top(제목, 작성자, 날짜, 조회수, 좋아요) -->
    <div id="title-section">
        <div id="title">
        </div>
        
        <div id="writer">
        </div>
        
        <div id="cre_dt">
        </div>
        
        <div id="views">
        </div>
        
        <div id="likes">
        </div>
    </div>
    <!-- content top(제목, 작성자, 날짜, 조회수, 좋아요) 끝 -->
    
<!-- image Slide Section -->
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    
  </ol>

  <!-- Wrapper for slides -->
<div id="img-container">
  <div class="carousel-inner" id="img-container-inner" role="listbox">
      

    </div>
  </div>
        

  <!-- Controls -->
  <a class="left carousel-control" id="left-control" href="#carousel-example-generic" role="button" data-slide="prev">

  </a>
  <a class="right carousel-control" id="right-control" href="#carousel-example-generic" role="button" data-slide="next">

  </a>
    
</div>
<!-- Image Slide Section End -->    
    
    
    
    
<!-- 자랑하기 내용 Section -->    
<div id="content-content">

    
<div id="list">
    <button type="button" class="btn btn-success" id="list-Btn">목록</button>
    </div>
</div>
<!-- 자랑하기 내용 Section End -->
    
    
    
    
</div>    





<script type="text/javascript">
$(document).ready(function() {
var url = location.href;
var dno = url.split('?')[1].split('=')[1];

var detail_data = new FormData();
detail_data.append("dno", dno);

 $.ajax({
    url : "../boastboard/ajax/detail_image.do",
    dataType : "json",
    type : "POST",
    contentType : false,
    processData : false,
    async: "true",
    data : detail_data,
    success : function(resultObj) {
      
      var img = $("#img-container-inner");
      var circle = $(".carousel-indicators");
      
      console.log("resultObj.count의 return 값은?"+resultObj.ImageCount+" 입니다.");
      
      /* 사진이 1장일 경우 */
      if (resultObj.ImageCount == 1) {
          $("<div class='item active'>").html(
                  "<div id='img-section'>"+
                "<img src='../images/"+resultObj.data[0].filename+"' id='img'>"+
                  "</div>").appendTo(img);
      }
      
      /* 사진이 여러 장일 경우 */
      else if (resultObj.ImageCount >= 2) {
          $("<div class='item active'>").html(
                  "<div id='img-section'>"+
                "<img src='../images/"+resultObj.data[0].filename+"' id='img'>"+
                  "</div>").appendTo(img);
          $("<li data-target='#carousel-example-generic' data-slide-to='0' class='active'></li>").appendTo(circle);
          
          for(var i = 1; i < resultObj.ImageCount; i++) {
            $("<div class='item'>").html(
                      "<div id='img-section'>"+
                    "<img src='../images/"+resultObj.data[i].filename+"' id='img'>"+
                      "</div>").appendTo(img);
              $("<li data-target='#carousel-example-generic' data-slide-to='0'></li>").appendTo(circle);
          }
          
          $('#left-control')
          .append("<span class='glyphicon glyphicon-chevron-left' aria-hidden='true'></span>"
                +"<span class='sr-only'>Previous</span>");
          
          $('#right-control')
          .append("<span class='glyphicon glyphicon-chevron-right' aria-hidden='true'></span>"
                +"<span class='sr-only'>Next</span>");
      }


    } }); 
 
 
 
 $.ajax({
      url : "../boastboard/ajax/detail_content.do",
      dataType : "json",
      type : "POST",
      contentType : false,
      processData : false,
      async: "true",
      data : detail_data,
      success : function(resultObj) {
        
        $('#title').append("<span>"+resultObj.data[0].title+"</span>")
        $('#writer').append("<span><i class='fa fa-user'></i> "+resultObj.data[0].member+"</span>")
        $('#cre_dt').append("<span><i class='fa fa-calendar'></i> "+resultObj.data[0].createDate+"</span>")
        $('#views').append("<span><i class='fa fa-eye'></i> "+resultObj.data[0].view+"</span>")
        $('#likes').append("<span id='likes-span'><i class='fa fa-thumbs-o-up'></i> "+resultObj.data[0].like+"</span>")
        $('#content-content').append("<pre id='content-content-content'>"+resultObj.data[0].content+"</pre>")
        
      } }); 
 
});  
</script>


<!-- 좋아요(Likes) Toggle 기능 -->
<script>
$(document).ready(function() {
var like_toggle = 0;



$('#likes').click(function(event) { 

	alert($.session.get('mname'));
	
    if(like_toggle == 0) {
        $('.fa-thumbs-o-up').css({"color":"blue","font-size": "20px"});
        like_toggle = 1;
    } else if(like_toggle == 1) {
        $('.fa-thumbs-o-up').css({"color":"#767475","font-size": "17px"});
        like_toggle = 0;
    }
});


/* List 돌아가는 이벤트 */
$('#list-Btn').click(function(event) {
    location.href='boastBoard.html';
    location.replace('boastBoard.html');
});

});
</script>



<!-- Log In/Out Script -->
<script>
    $(document).ready(function() {
              //    로그인 회원 정보출력 세션없으면 로그인페이지로
              var div = $('#user_info');
              if ($.session.get('mno') != undefined) {
                div
                    .append("<img src='files/"
                        + $.session.get('mimg')
                        + "' id='userImg' />"
                        + "<a id='userName' href='#'>"
                        + $.session.get('mname')
                        + "</a>"
                        + "<a role='button' id='outBtn' class='logout'>"
                        + "<i class='fa fa-unlock fa-lg'></i></a>")
              } else {
                div
                    .append("<a href='login.html' id='loginBtn'>로그인</a>")
              }

              //    로그아웃
              $(document).on("click", "#outBtn", function() {
                $.session.clear();
                location.href = "login.html"
              });
            });
  </script>
</body>
</html>
