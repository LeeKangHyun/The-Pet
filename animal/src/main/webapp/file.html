<!DOCTYPE html>
<html lang="ko">

<head>
<meta charset="UTF-8">
<title>멀티파일....</title>
<script src="lib/jquery/jquery.js" type="text/javascript"></script>
<script src="lib/jquery-form/jquery.form.js" type="text/javascript"></script>
</head>

<body>
  <input multiple type="file" name="fName" id="fName" />
  <input type="button" id="subbutton" value="Upload" />

  <script>
      $(document).ready(function() {
        $("#subbutton").click(function() {
          processFileUpload();
        });

        $("#fName").on('change', prepareLoad);
        var files;
        function prepareLoad(event) {
          console.log('event fired : ' + event.target.files[0].name);
          files = event.target.files;
        }
        function processFileUpload() {
          console.log("fileupload clicked");
          var oMyForm = new FormData();
          oMyForm.append("fName", files[0].name);

          console.log(oMyForm);
          $.ajax({
            dataType : 'json',
            url : "file/ajax/upload.do",
            data : oMyForm,
            type : "POST",
            enctype : 'multipart/form-data',
            processData : false,
            contentType : false,
            success : function(result) {
              alert('success' + JSON.stringify(result));
            },
            error : function(result) {
              alert('error' + JSON.stringify(result));
            }
          });
        }
      });
    </script>
</body>

</html>
