<!DOCTYPE html>
<html lang="ko">

<head>
    <link rel="icon" href="icon/1.ico" type="image/x-icon" />
    <meta charset="UTF-8">
    <title>산책코스</title>
    <link href="lib/bootstrap/dist/css/bootstrap.css" rel='stylesheet' type='text/css'
    />

    <!-- 강현 css -->
    <link rel='stylesheet' href='css/kh_map.css' />
    <link rel='stylesheet' href='css/kh_walk.css' />

    <!--  상훈 css  -->
    <link href="css/sh_slidmenu_header_diary.less" type="style.less" rel="stylesheet/less"
    />

    <!--  폰트아이콘 링크  -->
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="css/icon-font.min.css" rel="stylesheet" />

    <script src='lib/jquery/jquery.min.js'></script>
    <script src="lib/bootstrap/dist/js/bootstrap.js"></script>
    <script src="lib/less/less.js" type="text/javascript"></script>

    <script src="lib/jquery-session-plugin/jquery.session.js" type="text/javascript"></script>

    <style>
        .dot {
            /*border: 1px solid black;*/
            overflow: hidden;
            float: left;
            width: 12px;
            height: 12px;
            background: url('http://i1.daumcdn.net/localimg/localimages/07/mapapidoc/mini_circle.png');
        }

        #m-list {
            font-size: 16pt;
        }
    </style>
</head>

<body>
    <header id="menu">
      <div id="header_title">
        <a class="headerTitle" href="pet.html">
          <span id="the">THE</span> <span id="P">P</span><span id="et">ET</span>
        </a>
        <a class="headerSubTitle" href="diary.html">
          산책
        </a>
        <div id="user_info"></div>
      </div>
      <!--  메뉴 버튼  -->
      <input type="checkbox" id="menuToggle" />

      <div id="sideMenu">
        <label for="menuToggle" id="menu-icon"><i class="fa fa-bars fa-lg"></i></label>
        <!--  메뉴 내용  -->

        <nav id="menu-nav">
          <ul id="menu-nav-ul">
            <li><a href="#"><i class="lnr lnr-pencil"></i> 교육</a></li>
            <li><a href="#"><i class="lnr lnr-store"></i> 분양</a></li>
            <li><a href="mating.html"><i class="lnr lnr-heart"></i> 짝짓기</a></li>
            <li><a href="#"><i class="lnr lnr-leaf"></i> 산책코스</a></li>
            <li><a href="BoastBoard/boastBoard.html"><i class="lnr lnr-paw"></i> 자랑해요</a></li>
            <li><a href='diary.html'><i class='lnr lnr-book'></i> 다이어리</a></li>
          </ul>
        </nav>
        <!--  //메뉴 내용  -->
      </div>
    </header>

    <section id="main-body" style="border: 1px solid black;">
        <h1>딸랑 딸랑 산책 코스 미리보기 딸랑 딸랑</h1>
        <div id='map'></div>

        <div id="m-list" style="border: 1px solid blue;">
            <ul style='list-style: none;'></ul>
        </div>
    </section>

    <section id='main-comment'>
        <div id='carousel-example-generic' class='carousel slide' data-ride='carousel' data-wrap='false' data-interval="false">
            <!-- Indicators -->
            <ol class='carousel-indicators' id="dots">
               <li data-target='#carousel-example-generic' data-slide-to='0' class='active'></li>
               <li data-target='#carousel-example-generic' data-slide-to='1' ></li>
               <li data-target='#carousel-example-generic' data-slide-to='2' ></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox" id="imgs">
                <div class='item active'><img class='slideimg' src='images/h1.jpg'></div>
                <div class='item'><img class='slideimg' src='images/h2.jpg'></div>
                <div class='item'><img class='slideimg' src='images/h3.jpg'></div>
            </div>

            <!-- Controls -->
            <a class='left carousel-control' href='#carousel-example-generic' role='button' data-slide='prev'>
                <span class='glyphicon glyphicon-chevron-left' aria-hidden='true'></span>
                <span class='sr-only'>Previous</span>
            </a>
            <a class='right carousel-control' href='#carousel-example-generic' role="button" data-slide='next'>
                <span class='glyphicon glyphicon-chevron-right' aria-hidden='true'></span>
                <span class='sr-only'>Next</span>
            </a>
        </div>

    </section>

    <section id='main-text'>
        <div>
            <div class='contents'>

                <div class='content' id="mcontent"></div>

                <div class='input'>
                    <textarea id="comcontent" class='commentin' cols='30' rows='2' placeholder='댓글을 입력하세요...'></textarea>
                    <a id="comDelBtn" role='button'>게시</a>
                </div>
                <div class='comments' id="comComment">
<!--
                    <div class='comment'>
                      <img class='commentimg' src='files/'>
                      <div class='commentname'>" + mem.mName + "</div>
                      <div class='commenttext'>" + com.comComment + "</div>
                    </div>
-->
                </div>
            </div>
        </div>
    </section>

    <footer style="width: 1024px; height: auto; margin: 0 auto;">
        &copy;lkh
    </footer>

    <script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=d6f32883b1f882092688e8062e26dd77&libraries=services"></script>
    <script>
        var no = location.href.split('?')[1].split('=')[1];

        $(document).ready(function() {
            //    로그인 회원 정보출력 세션없으면 로그인페이지로
            var div = $('#user_info');
            var ul = $('#menu-nav-ul');
            if ($.session.get('mno') != undefined) {
                div.append(
                    "<img src='files/" + $.session.get('mimg') +
                    "' id='userImg' />" +
                    "<a id='userName' href='#'>" + $.session.get(
                        'mname') + "</a>" +
                    "<a role='button' id='outBtn' class='logout'>" +
                    "<i class='fa fa-unlock fa-lg'></i></a>")

                ul.append(
                    "<li><a href='diary.html'><i class='lnr lnr-book'></i> 다이어리</a></li>"
                )

            } else {
                div.append("<a href='login.html' id='loginBtn'>로그인</a>")
            }

            //    로그아웃
            $(document).on("click", "#outBtn", function() {
                $.session.clear();
                location.href = "login.html"
            });
        });

    <!-- 지도 나오기 -->
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div
            mapOption = {
                center: new daum.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨
            };

        var map = new daum.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

        // 주소-좌표 변환 객체를 생성합니다
        var geocoder = new daum.maps.services.Geocoder();

        $.ajax({
            url: "walk/ajax/list.do",
            data: {
                mno: no
            },
            async: false,
            type: "get",
            dataType: "json",
            success: function(resultObj) {
                //console.log(resultObj.walkList)
                //var i = 0;
                var bounds = new daum.maps.LatLngBounds();
                var coord = new daum.maps.LatLng();
                var content = '';
                var j = 0;
                for (var i = 0; i < resultObj.walkList.length; i++) {
                    // 클릭 지점을 표시할 빨간 동그라미 커스텀오버레이를 생성합니다
                    content = '<h3>' + (i + 1) +
                        '</h3><span class="dot"></span>';
                    console.log(i);
                    coord = new daum.maps.LatLng(resultObj.walkList[
                            i].lat, resultObj.walkList[i].lng);
                    //console.log(coord)

                    var circleOverlay = new daum.maps.CustomOverlay({
                        map: map,
                        content: content,
                        position: coord,
                        zIndex: 1,
                        yAnchor: 1
                    });


                    // 리스트 나오기
                    var callback = function(status, result) {
                        if (status === daum.maps.services.Status
                            .OK) {
                            console.log(result)
                            $("#m-list ul").append("<li>" + (j + 1) +
                                result[0].region +
                                "</li>")
                            j++;
                        }
                    };

                    geocoder.coord2detailaddr(coord, callback);

                    // 지도에 표시합니다
                    circleOverlay.setMap(map);

                    // 중심 좌표
                    bounds.extend(coord);
                }

                map.setBounds(bounds);
            }
        })

    </script>
</body>

</html>
